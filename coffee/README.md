sameer-macbookpro% go run main.go burn.go perf.go --mode=ideal,finelocking,parsteam,linearpipe-0,linearpipe-10,splitpipe-0,splitpipe-10,multi-1,multi-2,multi-4,multi-8,multipipe-1,multipipe-2,multipipe-4,multipipe-8 --par=8 --dur=3s
2017/10/11 08:37:26 opsPerSec = 54669
2017/10/11 08:37:26 GOMAXPROCS=8
mode,par,maxprocs,maxq,dur,interval,ops,drops,thru,dthr,wall,exec,util,upar,min,p05,p25,p50,p75,p90,p95,p99,max
ideal,8,8,0,3s,0s,12353,0,4111,0,3.005109033s,20.756464s,691%,86%,0.948,1.557,1.717,1.841,2.108,2.384,2.562,2.975,5.181
finelocking,8,8,0,3s,0s,9906,0,3299,0,3.002834688s,10.343623s,344%,43%,0.948,0.950,1.462,2.466,2.848,3.671,4.244,11.782,94.570
parsteam,8,8,0,3s,0s,10308,0,3433,0,3.002484521s,11.156106s,372%,46%,0.715,1.305,2.242,2.476,2.748,3.363,4.100,5.530,11.943
linearpipe-0,8,8,0,3s,0s,9395,0,3129,0,3.002665773s,10.130859s,337%,42%,1.197,2.604,2.739,2.848,2.974,3.133,3.233,3.426,3.828
linearpipe-10,8,8,0,3s,0s,9961,0,3318,0,3.002377254s,10.631779s,354%,44%,0.950,2.117,2.609,2.670,2.783,3.068,3.252,3.834,6.537
splitpipe-0,8,8,0,3s,0s,9689,0,3227,0,3.002184688s,10.480432s,349%,44%,0.815,2.551,2.681,2.774,2.873,2.965,3.042,3.334,4.049
splitpipe-10,8,8,0,3s,0s,10214,0,3401,0,3.002963708s,11.110681s,370%,46%,0.714,1.613,2.335,2.606,2.884,3.238,3.572,4.178,5.117
multi-1,8,8,0,3s,0s,10107,0,3366,0,3.002620743s,10.44496s,348%,43%,1.220,2.373,2.569,2.664,2.765,2.874,2.928,3.045,3.481
multi-2,8,8,0,3s,0s,11027,0,3673,0,3.002280051s,14.179795s,472%,59%,0.949,1.755,1.970,2.242,2.773,2.926,3.113,3.454,10.394
multi-4,8,8,0,3s,0s,11907,0,3965,0,3.00275869s,20.000042s,666%,83%,0.949,1.564,1.718,1.887,2.176,2.475,2.707,3.574,30.916
multi-8,8,8,0,3s,0s,11826,0,3940,0,3.001660767s,19.910262s,663%,83%,0.950,1.563,1.718,1.864,2.151,2.465,2.684,3.368,42.101
multipipe-1,8,8,0,3s,0s,9247,0,3079,0,3.0029675s,9.641643s,321%,40%,1.202,2.617,2.744,2.863,3.051,3.221,3.293,3.687,8.620
multipipe-2,8,8,0,3s,0s,10084,0,3358,0,3.002532641s,11.82467s,394%,49%,0.952,1.868,2.255,2.615,2.944,3.285,3.515,4.050,20.559
multipipe-4,8,8,0,3s,0s,12239,0,4072,0,3.005574509s,20.53975s,683%,85%,0.950,1.562,1.720,1.905,2.218,2.630,2.938,3.832,12.223
multipipe-8,8,8,0,3s,0s,12315,0,4101,0,3.002712141s,20.872857s,695%,87%,0.955,1.559,1.719,1.795,2.063,2.610,3.602,5.083,11.749

foreach mode ( ideal locking finelocking parsteam multi-1 multi-2 multi-4 multi-8 linearpipe-0 linearpipe-1 linearpipe-10 splitpipe-0 splitpipe-1 splitpipe-10 multipipe-1 multipipe-2 multipipe-4 multipipe-8 )
go run main.go burn.go perf.go --dur=3s --par=8 --trace=./trace-$mode.out -mode=$mode
go tool trace --pprof=sync ./trace-$mode.out > ./sync-$mode.pprof
go-torch -b ./sync-$mode.pprof -f ./torch-$mode.svg
end
