sameer-macbookpro% go run main.go burn.go perf.go --mode=ideal,finelocking,parsteam,linearpipe-0,linearpipe-10,splitpipe-0,splitpipe-10,multi-1,multi-2,multi-4,multi-8,multipipe-1,multipipe-2,multipipe-4,multipipe-8 --par=8 --dur=3s
2017/10/11 08:37:26 opsPerSec = 54669
2017/10/11 08:37:26 GOMAXPROCS=8
mode,par,maxprocs,maxq,dur,interval,ops,drops,thru,dthr,wall,exec,util,upar,min,p05,p25,p50,p75,p90,p95,p99,max
ideal,8,8,0,3s,0s,12353,0,4111,0,3.005109033s,20.756464s,691%,86%,0.948,1.557,1.717,1.841,2.108,2.384,2.562,2.975,5.181
finelocking,8,8,0,3s,0s,9906,0,3299,0,3.002834688s,10.343623s,344%,43%,0.948,0.950,1.462,2.466,2.848,3.671,4.244,11.782,94.570
parsteam,8,8,0,3s,0s,10308,0,3433,0,3.002484521s,11.156106s,372%,46%,0.715,1.305,2.242,2.476,2.748,3.363,4.100,5.530,11.943
linearpipe-0,8,8,0,3s,0s,9395,0,3129,0,3.002665773s,10.130859s,337%,42%,1.197,2.604,2.739,2.848,2.974,3.133,3.233,3.426,3.828
linearpipe-10,8,8,0,3s,0s,9961,0,3318,0,3.002377254s,10.631779s,354%,44%,0.950,2.117,2.609,2.670,2.783,3.068,3.252,3.834,6.537
splitpipe-0,8,8,0,3s,0s,9689,0,3227,0,3.002184688s,10.480432s,349%,44%,0.815,2.551,2.681,2.774,2.873,2.965,3.042,3.334,4.049
splitpipe-10,8,8,0,3s,0s,10214,0,3401,0,3.002963708s,11.110681s,370%,46%,0.714,1.613,2.335,2.606,2.884,3.238,3.572,4.178,5.117
multi-1,8,8,0,3s,0s,10107,0,3366,0,3.002620743s,10.44496s,348%,43%,1.220,2.373,2.569,2.664,2.765,2.874,2.928,3.045,3.481
multi-2,8,8,0,3s,0s,11027,0,3673,0,3.002280051s,14.179795s,472%,59%,0.949,1.755,1.970,2.242,2.773,2.926,3.113,3.454,10.394
multi-4,8,8,0,3s,0s,11907,0,3965,0,3.00275869s,20.000042s,666%,83%,0.949,1.564,1.718,1.887,2.176,2.475,2.707,3.574,30.916
multi-8,8,8,0,3s,0s,11826,0,3940,0,3.001660767s,19.910262s,663%,83%,0.950,1.563,1.718,1.864,2.151,2.465,2.684,3.368,42.101
multipipe-1,8,8,0,3s,0s,9247,0,3079,0,3.0029675s,9.641643s,321%,40%,1.202,2.617,2.744,2.863,3.051,3.221,3.293,3.687,8.620
multipipe-2,8,8,0,3s,0s,10084,0,3358,0,3.002532641s,11.82467s,394%,49%,0.952,1.868,2.255,2.615,2.944,3.285,3.515,4.050,20.559
multipipe-4,8,8,0,3s,0s,12239,0,4072,0,3.005574509s,20.53975s,683%,85%,0.950,1.562,1.720,1.905,2.218,2.630,2.938,3.832,12.223
multipipe-8,8,8,0,3s,0s,12315,0,4101,0,3.002712141s,20.872857s,695%,87%,0.955,1.559,1.719,1.795,2.063,2.610,3.602,5.083,11.749

sameer-macbookpro% go run main.go burn.go perf.go --mode=ideal,finelocking,parsteam,linearpipe-0,linearpipe-10,splitpipe-0,splitpipe-10,multi-1,multi-2,multi-4,multi-8,multipipe-1,multipipe-2,multipipe-4,multipipe-8 --par=2 --dur=5s
2017/10/11 09:02:52 opsPerSec = 53387
2017/10/11 09:02:52 GOMAXPROCS=8
mode,par,maxprocs,maxq,dur,interval,ops,drops,thru,dthr,wall,exec,util,upar,min,p05,p25,p50,p75,p90,p95,p99,max
ideal,2,8,0,5s,0s,10189,0,2037,0,5.001457615s,10.046392s,201%,100%,0.949,0.981,1.180,1.449,1.708,1.836,1.884,2.159,3.106
finelocking,2,8,0,5s,0s,10346,0,2069,0,5.001474536s,10.028485s,201%,100%,0.949,1.144,1.193,1.401,1.595,1.647,1.690,1.868,3.335
parsteam,2,8,0,5s,0s,13426,0,2685,0,5.000527924s,13.359149s,267%,134%,0.834,0.928,0.980,1.068,1.180,1.230,1.299,1.487,2.140
linearpipe-0,2,8,0,5s,0s,10023,0,2002,0,5.005684534s,9.794598s,196%,98%,0.950,1.175,1.268,1.401,1.596,1.922,1.941,2.027,3.004
linearpipe-10,2,8,0,5s,0s,9500,0,1899,0,5.001837073s,9.244898s,185%,92%,0.951,1.229,1.258,1.411,1.982,1.997,2.000,2.236,2.688
splitpipe-0,2,8,0,5s,0s,12754,0,2550,0,5.000778462s,12.482052s,250%,125%,0.779,0.967,0.985,1.117,1.331,1.366,1.400,1.486,2.029
splitpipe-10,2,8,0,5s,0s,12340,0,2468,0,5.000692979s,12.04672s,241%,120%,0.962,0.970,0.977,1.112,1.443,1.453,1.459,1.507,1.797
multi-1,2,8,0,5s,0s,10402,0,2080,0,5.001917559s,10.042134s,201%,100%,0.951,1.149,1.198,1.393,1.579,1.620,1.672,1.807,2.425
multi-2,2,8,0,5s,0s,10446,0,2089,0,5.001182924s,10.066399s,201%,101%,0.949,0.965,1.145,1.388,1.630,1.764,1.825,1.866,2.368
multi-4,2,8,0,5s,0s,10352,0,2070,0,5.001772315s,10.066469s,201%,101%,0.949,0.973,1.169,1.404,1.643,1.784,1.844,1.952,2.535
multi-8,2,8,0,5s,0s,10465,0,2091,0,5.005318538s,10.078307s,201%,101%,0.949,0.979,1.143,1.385,1.630,1.745,1.800,1.864,2.126
multipipe-1,2,8,0,5s,0s,10015,0,2002,0,5.001281826s,9.690689s,194%,97%,1.089,1.222,1.264,1.405,1.593,1.937,1.946,1.955,2.146
multipipe-2,2,8,0,5s,0s,10398,0,2079,0,5.001894819s,10.057391s,201%,101%,0.949,0.962,1.155,1.405,1.669,1.827,1.882,1.908,2.962
multipipe-4,2,8,0,5s,0s,10430,0,2086,0,5.000610805s,10.048342s,201%,100%,0.949,0.951,1.124,1.406,1.716,1.890,1.901,1.906,2.407
multipipe-8,2,8,0,5s,0s,10422,0,2084,0,5.001957337s,10.05451s,201%,101%,0.950,0.955,1.163,1.413,1.663,1.832,1.894,1.906,2.410

sameer-macbookpro% go run main.go burn.go perf.go --mode=ideal,finelocking,parsteam,linearpipe-0,linearpipe-10,splitpipe-0,splitpipe-10,multi-1,multi-2,multi-4,multi-8,multipipe-1,multipipe-2,multipipe-4,multipipe-8 --par=100 --dur=5s
2017/10/11 09:10:31 opsPerSec = 53976
2017/10/11 09:10:31 GOMAXPROCS=8
mode,par,maxprocs,maxq,dur,interval,ops,drops,thru,dthr,wall,exec,util,upar,min,p05,p25,p50,p75,p90,p95,p99,max
ideal,100,8,0,5s,0s,19678,0,3928,0,5.009928158s,32.924154s,657%, 7%,1.418,2.167,9.593,17.299,24.767,31.278,35.975,44.735,73.708
finelocking,100,8,0,5s,0s,15910,0,3164,0,5.028956001s,18.07636s,359%, 4%,0.948,1.236,29.166,32.196,33.480,59.304,64.532,136.771,761.727
parsteam,100,8,0,5s,0s,17096,0,3396,0,5.034432634s,18.642606s,370%, 4%,0.731,1.611,28.999,31.485,34.104,39.149,59.724,69.658,133.594
linearpipe-0,100,8,0,5s,0s,15251,0,3030,0,5.033935394s,16.709081s,332%, 3%,1.876,31.257,31.830,32.569,34.533,36.048,36.857,40.553,44.900
linearpipe-10,100,8,0,5s,0s,17381,0,3456,0,5.028769355s,20.823262s,414%, 4%,1.671,24.472,27.763,28.935,30.506,32.532,33.935,36.116,42.957
splitpipe-0,100,8,0,5s,0s,16395,0,3259,0,5.031262133s,17.738928s,353%, 4%,1.184,30.203,30.626,30.891,31.156,31.456,31.857,34.431,36.073
splitpipe-10,100,8,0,5s,0s,17446,0,3471,0,5.026034694s,20.646243s,411%, 4%,0.835,24.679,27.630,28.917,30.264,31.835,33.115,36.482,44.367
multi-1,100,8,0,5s,0s,16425,0,3265,0,5.029982419s,17.736288s,353%, 4%,1.150,29.664,30.148,30.784,31.580,32.075,32.448,34.356,39.825
multi-2,100,8,0,5s,0s,18932,0,3773,0,5.017521215s,24.683776s,492%, 5%,1.106,22.153,24.685,26.521,27.985,29.240,29.927,31.433,37.252
multi-4,100,8,0,5s,0s,20569,0,4099,0,5.018442027s,34.654765s,691%, 7%,0.951,21.227,22.529,23.371,24.349,25.260,26.030,28.360,35.547
multi-8,100,8,0,5s,0s,20610,0,4100,0,5.027038531s,34.904167s,694%, 7%,1.415,2.235,9.457,17.059,24.164,30.338,34.355,42.588,68.978
multipipe-1,100,8,0,5s,0s,15318,0,3044,0,5.031746157s,16.458362s,327%, 3%,1.284,31.264,31.765,32.297,33.545,36.907,37.640,41.116,50.221
multipipe-2,100,8,0,5s,0s,16808,0,3342,0,5.029075996s,19.591155s,390%, 4%,1.799,23.854,29.741,30.883,31.639,32.197,32.525,33.096,35.003
multipipe-4,100,8,0,5s,0s,19991,0,3978,0,5.025048508s,33.494058s,667%, 7%,1.811,23.847,24.481,24.999,25.737,26.838,27.875,32.454,54.238
multipipe-8,100,8,0,5s,0s,20165,0,4012,0,5.026224956s,34.145438s,679%, 7%,1.507,20.246,22.136,23.157,24.345,26.076,27.529,31.606,50.591

foreach mode ( ideal locking finelocking parsteam multi-1 multi-2 multi-4 multi-8 linearpipe-0 linearpipe-1 linearpipe-10 splitpipe-0 splitpipe-1 splitpipe-10 multipipe-1 multipipe-2 multipipe-4 multipipe-8 )
go run main.go burn.go perf.go --dur=3s --par=8 --trace=./trace-$mode.out -mode=$mode
go tool trace --pprof=sync ./trace-$mode.out > ./sync-$mode.pprof
go-torch -b ./sync-$mode.pprof -f ./torch-$mode.svg
end
